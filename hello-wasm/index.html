<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
  </head>
  <body>
    <script type="module">
      import init, { greet, add, run_keccak } from "./pkg/hello_wasm.js";

      init().then(async () => {
        greet("WebAssembly");
        console.log("running keccak_chain.rs full_flow");
        const r1cs_path = "/static/keccak-circuit/keccak-chain.r1cs";
        const r1cs_response = await fetch(r1cs_path);
        const r1cs_bytes = await r1cs_response.arrayBuffer();
        const r1cs_res = new Uint8Array(r1cs_bytes);
        console.log("r1cs_res", r1cs_res);

        const wasm_path ="/static/keccak-circuit/keccak-chain_js/keccak-chain.wasm";
        const wasm_response = await fetch(wasm_path);
        const wasm_bytes = await wasm_response.arrayBuffer();
        const wasm_res = new Uint8Array(wasm_bytes);

        run_keccak(r1cs_res, wasm_res);
        console.log("finished running keccak_chain.rs full_flow");
      });

      

      const addButton = document.getElementById("add-button");
      addButton.addEventListener("click", function () {
        const input1 = document.getElementById("input1").value;
        const input2 = document.getElementById("input2").value;

        console.log(input1);

        const sum = document.getElementById("sum");
        sum.innerText += " " + add(input1, input2).toString();
        console.log("set sum text");
      });
    </script>
    <script src="./pkg/" type="module"></script>
    <!-- <script src="prove_verify.js" type="module"></script> -->

    <input type="text" id="input1" />
    <input type="text" id="input2" />
    <button id="add-button">Add</button>
    <div id="sum">sum is:</div>
  </body>
</html>
